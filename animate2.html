<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>SVG Transit Animation â€“ Camera + Keyboard Control</title>

<style>
  body {
    margin: 0;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
  }

  .frame {
    width: 90vw;
    max-width: 1280px;
    aspect-ratio: 16 / 9;
    background: #fff;
  }

  svg {
    width: 100%;
    height: 100%;
  }

  /* ---- Path animation ---- */
    .draw-path {
        fill: none;
        stroke-width: 30;
        stroke: #DF7025;
        stroke-linecap: round;
        stroke-linejoin: round;
        vector-effect: non-scaling-stroke;

        stroke-dasharray: var(--len);
        stroke-dashoffset: var(--len);

        animation: draw 10s ease-in-out forwards;
        animation-play-state: paused;
    }


    @keyframes draw {
        from { stroke-dashoffset: var(--len); }
        to   { stroke-dashoffset: 0; }
    }

    .playing .draw-path {
        animation-play-state: running;
    }


</style>
</head>

<body>

<div class="frame">
  <svg id="svg" viewBox="0 0 1100 662" xmlns="http://www.w3.org/2000/svg">

    <path class="draw-path" d="M15 15V1073.24L345.703 1629.01C354.908 1644.48 359.767 1662.14 359.767 1680.14V3236.67V3309.44H342.729C315.114 3309.44 292.729 3331.82 292.729 3359.44V3857.99C292.729 3885.6 315.114 3907.99 342.729 3907.99H359.767V4002.78V4273.25C359.767 4294.17 366.331 4314.57 378.534 4331.57L1030.15 5239.17" />
    <!-- <path class="draw-path" d="M15 15V1073.24L345.703 1629.01C354.908 1644.48 359.767 1662.14 359.767 1680.14V3236.67M359.767 3309.44V3236.67M359.767 3907.99V4002.78M1030.15 5239.17L378.534 4331.57C366.331 4314.57 359.767 4294.17 359.767 4273.25V4002.78M359.767 3236.67V4002.78" />  -->

    <!-- <path class="draw-path" stroke="#0077CA" d="M6.24529 144.5H32.9953C50.6798 144.5 69.2069 145.94 84.0372 155.573C88.4004 158.407 92.4525 161.879 96.428 166.566C108.123 180.354 110.933 191.946 113.245 211V283" />
    <path class="draw-path" stroke="#003C71" d="M148.745 40.5V191.5C146.764 205.7 142.89 220.07 133.374 230.794C125.21 239.993 116.449 244.87 104.199 248.503C96.3693 250.825 88.0717 251.335 80.0257 249.934C58.9796 246.268 45.3368 238.104 37.5682 223.228C33.3782 215.205 32.7453 205.917 32.7453 196.866V98.5C32.7453 95.1863 35.4316 92.5 38.7453 92.5H194.245" />
    <path class="draw-path" stroke="#E75D2A" d="M208.245 135H128.245C126.036 135 124.245 133.209 124.245 131V121C124.245 118.791 122.454 117 120.245 117H110.745C108.536 117 106.745 115.209 106.745 113V6.5" /> -->


</svg>
</div>



<script>
  const svg = document.getElementById("svg");
  const paths = document.querySelectorAll(".draw-path");

  /* ---- Init path lengths ---- */
    paths.forEach((path, i) => {
        const len = path.getTotalLength();
        path.style.setProperty('--len', len);
        path.style.animationDelay = `${i * 0.6}s`;
    });





  /* ---- Playback ---- */
  let playing = false;

  function togglePlay() {
    playing = !playing;
    svg.classList.toggle("playing", playing);
  }

    function resetAnimation() {
        svg.classList.remove("playing");

        paths.forEach((path) => {
            const len = path.getTotalLength();

            path.style.animation = "none";
            path.style.strokeDashoffset = len;
            path.getBoundingClientRect(); // force reflow
            path.style.animation = "";
        });

        playing = false;
    }


  /* ---- Camera auto-fit ---- */
  const bbox = svg.getBBox();
  let viewBox = {
    x: bbox.x - 100,
    y: bbox.y - 100,
    w: bbox.width + 200,
    h: bbox.height + 200
  };

  function updateViewBox() {
    svg.setAttribute(
      "viewBox",
      `${viewBox.x} ${viewBox.y} ${viewBox.w} ${viewBox.h}`
    );
  }

  updateViewBox();

  /* ---- Keyboard controls ---- */
  const PAN_STEP = 40;
  const ZOOM_FACTOR = 0.9;

  function zoom(factor) {
    const cx = viewBox.x + viewBox.w / 2;
    const cy = viewBox.y + viewBox.h / 2;

    viewBox.w *= factor;
    viewBox.h *= factor;

    viewBox.x = cx - viewBox.w / 2;
    viewBox.y = cy - viewBox.h / 2;
  }

  window.addEventListener("keydown", (e) => {
    switch (e.key) {
      case "ArrowLeft":
        viewBox.x -= PAN_STEP;
        break;
      case "ArrowRight":
        viewBox.x += PAN_STEP;
        break;
      case "ArrowUp":
        viewBox.y -= PAN_STEP;
        break;
      case "ArrowDown":
        viewBox.y += PAN_STEP;
        break;
      case "+":
      case "=":
        zoom(ZOOM_FACTOR);
        break;
      case "-":
        zoom(1 / ZOOM_FACTOR);
        break;
      case "k":
      case "K":
        togglePlay();
        return;
      case "r":
      case "R":
        resetAnimation();
        return;
      default:
        return;
    }
    updateViewBox();
  });

  /* ---- Mouse wheel zoom ---- */
  svg.addEventListener("wheel", (e) => {
    e.preventDefault();
    zoom(e.deltaY > 0 ? 1.1 : 0.9);
    updateViewBox();
  }, { passive: false });
</script>


</body>
</html>